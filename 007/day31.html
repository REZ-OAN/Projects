<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TODO APPS</title>
    <style>
        body{
            background-color:rgb(86, 86, 211);
            padding: 0;
            margin: 0;
            font-family: 'Times New Roman', Times, serif;
        }
        #appbackground{
            background-color: blueviolet ;
            width: 80%;
            min-height: 700px;
            margin: auto auto;
            margin-top: 100px;
            box-shadow: 0px 0px 10px rgba(0,0,0,.5);
            border-radius: 15px;
            margin-bottom: 100px;
            display: flex;
            flex-direction: column;
            
        }
        #header-image{
            height: 150px;
            margin-top: 40px;
           
            align-self: center;

        }
        #header-image img{
            height: 150px;
        }
        #input-task{
            font-size: 20px;
            height: 80px;
            width: 100%;
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #input-task .form-addTask{
            
            display: flex;
            width: 90%;
            border-bottom: 1px solid white ;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            height: 100px;  
        }
        .form-addTask label{
            color : white;
            text-shadow: 0px 0px 10px rgba(255,0,0,.9);
            font-size: 25px;
            font-weight: 700;
        }
        .form-addTask input[type="text"]{
            height: 40px;
            width: 500px;
            font-size: 20px;
            background-color: transparent;
            border:none;
            border-radius: 30px;
            color : white;
            outline-style: solid;
            outline-color: blanchedalmond;
            outline-width: 3px;
            box-sizing: border-box;
            padding-left: 30px;
            transition: all .06s ease-in-out;


        }
        .form-addTask input[type="text"]::placeholder{
            color : white;
            opacity: .5;
        }
        .form-addTask input[type="text"]:focus{
           outline-color: rgb(9, 204, 136);
           outline-width: 3px;
        }
        .form-addTask input[type="submit"]{
            height: 40px;
            width: 150px;
            font-size: 15px;
            font-weight: bold;
            background-color: rgb(101, 101, 214);
            outline-width: 1px;
            outline-style: solid;
            outline-color: white;
            border:none;
            border-radius: 30px;
            color : white;
           
            transition: all .3s ease-in-out;
        }
        .form-addTask input[type="submit"]:hover{
            background-color:rgba(39, 150, 39, 0.956);
            box-shadow: 0px 0px 10px rgba(0,0,0,.5);
            transform: scale(1.04);
            outline: none;
            border: none;
        }
        #showcaseTask{
            margin-top: 40px;
            min-height: 500px;
            margin-bottom: 20px;
            width: 98%;
           
            align-self: center;
            
            display: flex;
            flex-direction: row;
            justify-content: space-around;
            align-content: center;
        }
        #showcaseTask #incompleteTask{
            margin-top: 15px;
            width: 45%;
            min-height: 350px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all .4s ease-in-out;
        }
        #incompleteTask:hover{
            transform: scale(1.05);
            box-shadow: 0px 0px 5px rgba(0,0,0,.6);
        }
        #showcaseTask #completeTask{
            margin-top: 15px;;
            width: 45%;
            min-height: 350px;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-radius: 10px;
            margin-bottom: 15px;
            transition: all .4s ease-in-out;
        }
        #completeTask:hover{
            transform: scale(1.05);
            box-shadow: 0px 0px 5px rgb(0, 217, 255); 
        }
        #completeTask #task-list li {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            padding-left: 10px;
            padding-right: 30px;
        }
        #completeTask #task-list li input[type="button"]{
            background-color: rgba(220, 20, 60, 0.6);
            color : white;
            border-radius: 10px;
            border: none;
            outline: none;
            transition: all .3s ease-in-out;
        }
        #completeTask #task-list li input[type="button"]:hover{
            background-color: crimson;
        }
        #incompleteTask h1{
           
            text-align: center;
            color : rgba(255, 255, 255, 0.889);
            text-shadow: 0px 0px 2px white;
            align-self: center;
            
        }
        #completeTask h1{
            text-align: center;
            color : rgba(252, 252, 252, 0.947);
            text-shadow: 0px 0px 5px black;
        }
        #task-list{
            list-style: none;
            padding: 0px;
            margin : 0px;
            width: 80%;
        }
       
        #task-list li{
           
            height: 40px;
            box-sizing: border-box;
            padding-top: 3px;
            padding-left: 10px;
            padding-bottom: 3px;
            margin-bottom: 5px;
            font-size: 25px;
            background-color: rgb(233, 224, 224);
            border-radius: 5px;
        }
        input[type="checkbox"]{
            height: 15px;
        }

    </style>
</head>
<body>
   <div id="appbackground">
      <div id="header-image">
        <img src="./todo.png">
      </div>
      <div id="input-task">
        <form class="form-addTask">
            <label for="addTask">
                Add Task 
            </label>
            <input type="text" placeholder="input text here" autocomplete="off" name="addTask">
            <input type="submit" name="addTasktolist" value="ADD">
        </form>
      </div>
      <div id="showcaseTask">
          <div id="incompleteTask">
                <h1>Incomplete Task</h1>
                <ul id="task-list">
                    
                </ul>
          </div>
          
          <div id="completeTask">
                <h1>Complete Task</h1>
                <ul id="task-list">
                   
                </ul>
          </div>
      </div>
   </div>
    <script>
        const addTask = document.querySelector('#input-task  .form-addTask');
        const incUl = document.querySelector('#incompleteTask #task-list');
        const cUl = document.querySelector('#completeTask #task-list');
        const incompleteItemList = JSON.parse(localStorage.getItem('incI')) || [];
        const completeItemList = JSON.parse(localStorage.getItem('cI')) || [];
        const incCheckBox = document.querySelectorAll
        let incItemNo = 0;
        function saveonLocalStorage(class_key,class_value){
            localStorage.setItem(class_key,class_value);
        }
        function addTaskToIncList(incUl,itemsList=[]){
            
            incUl.innerHTML = itemsList.map((item,i)=>{
                return  `
                    <li>
                        <input type="checkbox" data-index=${i} ${item.isdone? 'checked':''} />
                       <span>${item.text}</span>
                    </li>
                    `;
            }).join('');
            
        }
        function addTaskToClist(cUl,itemsList=[]){
            cUl.innerHTML=itemsList.map((item,i)=>{
                return `<li>
                        <span>${item.text}</span>
                        <input type="button"  value="DELETE" data-index="${i}">
                    </li>`;
            }).join('');
        }
        function addtasktoList(e){
          e.preventDefault();
          const Name = this.querySelector('input[type="text"]').value;
          if(Name===''||Name===undefined||Name===null){
            window.alert('Hey, Insert Valid Text!! Null Text Is Not a Valid Text :V');
          }
          else {
          const itemstate = {
            text : `${Name}`,
            isdone : false
          }
          incompleteItemList.push(itemstate);
          addTaskToIncList(incUl,incompleteItemList);
          saveonLocalStorage('incI',JSON.stringify(incompleteItemList)); 
          this.reset();
        }
        }
        function passIncToC(e){
            if(!e.target.matches('input'))return;
            const item = e.target;
            const idx = item.dataset.index;
            completeItemList.push(incompleteItemList[idx]);
            incompleteItemList.splice(idx,1);
            saveonLocalStorage('incI',JSON.stringify(incompleteItemList));
            setTimeout(function() {
                addTaskToIncList(incUl,incompleteItemList);
                addTaskToClist(cUl,completeItemList);
                saveonLocalStorage('cI',JSON.stringify(completeItemList));
            },250);

        }
        function removeFromCompleteList(e){
            if(!e.target.matches('input'))return;
            const item = e.target
            const idx = item.dataset.index;
            completeItemList.splice(idx,1);
            setTimeout(function() {
                addTaskToClist(cUl,completeItemList);
                saveonLocalStorage('cI',JSON.stringify(completeItemList));
            },250);
        }
        addTask.addEventListener('submit',addtasktoList);
        incUl.addEventListener('click',passIncToC);
        cUl.addEventListener('click',removeFromCompleteList);
        addTaskToIncList(incUl,incompleteItemList);
        addTaskToClist(cUl,completeItemList);
    </script>
</body>
</html>